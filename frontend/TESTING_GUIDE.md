# 前端功能测试指南

## ✅ 当前状态

- ✅ 后端服务运行正常（<http://localhost:8080）>
- ✅ 前端开发服务器已启动（<http://localhost:3000）>
- ✅ API 连接测试通过
- ✅ 测试账号已创建

## 🧪 测试步骤

### 1. 访问前端应用

打开浏览器访问：**<http://localhost:3000>**

### 2. 测试用户注册

1. 访问：<http://localhost:3000/register>
2. 填写表单：
   - 邮箱：`test@example.com`（或任意邮箱）
   - 密码：`test12345`（至少8位）
   - 昵称：`测试用户`（可选）
3. 点击"注册"按钮
4. 应该看到"注册成功！正在跳转到登录页面..."

**预期结果**：

- ✅ 注册成功提示
- ✅ 3秒后自动跳转到登录页

### 3. 测试用户登录

1. 访问：<http://localhost:3000/login>
2. 使用刚才注册的账号登录：
   - 账号：`test@example.com`
   - 密码：`test12345`
3. 点击"登录"按钮

**预期结果**：

- ✅ 登录成功
- ✅ 自动跳转到首页（<http://localhost:3000）>
- ✅ 导航栏显示用户昵称或邮箱
- ✅ 显示"欢迎，测试用户！"或类似信息

### 4. 测试个人资料页面

1. 点击导航栏的"个人资料"链接
2. 或直接访问：<http://localhost:3000/profile>
3. 查看当前用户信息：
   - 邮箱（只读）
   - 角色（只读）
   - 昵称（可编辑）
   - 个人简介（可编辑）
   - 头像 URL（可编辑）

**预期结果**：

- ✅ 显示当前用户的所有信息
- ✅ 可以编辑昵称、简介、头像 URL
- ✅ 点击"保存"后显示"资料更新成功！"

### 5. 测试更新个人资料

1. 在个人资料页面修改：
   - 昵称：`新昵称`
   - 个人简介：`这是我的个人简介`
   - 头像 URL：`https://example.com/avatar.jpg`
2. 点击"保存"按钮

**预期结果**：

- ✅ 显示"资料更新成功！"
- ✅ 页面上的信息已更新
- ✅ 刷新页面后信息仍然保存

### 6. 测试路由守卫

1. 点击导航栏的"登出"按钮
2. 尝试访问：<http://localhost:3000/profile>

**预期结果**：

- ✅ 登出后自动跳转到登录页
- ✅ 访问受保护页面时自动跳转到登录页
- ✅ 登录后可以跳转回原访问的页面

### 7. 测试 Token 自动刷新

1. 登录后等待 15 分钟（access_token 过期时间）
2. 或手动修改 localStorage 中的 access_token 为无效值
3. 访问需要认证的页面

**预期结果**：

- ✅ 自动使用 refresh_token 刷新 access_token
- ✅ 无需重新登录即可继续使用

## 🐛 常见问题排查

### 问题 1：页面显示空白

**可能原因**：

- 前端服务器未启动
- 浏览器控制台有错误

**解决方法**：

```bash
# 检查前端服务器
curl http://localhost:3000

# 查看浏览器控制台（F12）
```

### 问题 2：注册/登录失败

**可能原因**：

- 后端服务未运行
- API 地址配置错误
- 网络连接问题

**解决方法**：

```bash
# 检查后端服务
curl http://localhost:8080/health

# 检查 .env 文件
cat frontend/.env
```

### 问题 3：CORS 错误

**可能原因**：

- 后端未配置 CORS
- 前端代理配置错误

**解决方法**：

- 检查 `vite.config.ts` 中的代理配置
- 确保后端允许前端域名访问

### 问题 4：Token 刷新失败

**可能原因**：

- refresh_token 已过期（30天）
- Token 格式错误

**解决方法**：

- 重新登录获取新的 Token
- 检查 localStorage 中的 Token 是否正确

## 📋 测试检查清单

- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] Token 正确存储到 localStorage
- [ ] 个人资料页面可以访问
- [ ] 个人资料可以更新
- [ ] 路由守卫正常工作（未登录跳转）
- [ ] 登出功能正常
- [ ] 导航栏显示正确
- [ ] 错误提示正常显示
- [ ] 加载状态正常显示

## 🎯 测试账号

已创建的测试账号：

- 邮箱：`test1762328310@example.com`
- 密码：`test12345`

你也可以注册新账号进行测试。

## 📝 测试报告模板

```.
测试日期：____
测试人员：____

功能测试结果：
- [ ] 用户注册：通过/失败
- [ ] 用户登录：通过/失败
- [ ] 个人资料查看：通过/失败
- [ ] 个人资料更新：通过/失败
- [ ] 路由守卫：通过/失败
- [ ] Token 刷新：通过/失败

发现的问题：
1. 
2. 

备注：
```

## 🚀 下一步

完成第一阶段前端测试后，可以开始：

1. 修复发现的问题
2. 开始第二阶段开发（文档 CRUD）
3. 优化 UI/UX
